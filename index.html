<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Schedule Checker</title>
    <link href="https://fonts.googleapis.com/css2?family=Alata&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Alata', sans-serif;
        }

        h1 {
            text-align: center;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }
    </style>
</head>

<body>
    <h1>Daily Schedule Checker</h1>
    <table>
        <tr>
            <th>Time of Day</th>
            <th>Activities</th>
        </tr>
        <tr>
            <td>Morning</td>
            <td>
                <ul>
                    <li><input type="checkbox" id="morning1"> Run</li>
                    <li><input type="checkbox" id="morning2"> Work out</li>
                    <li><input type="checkbox" id="morning3"> Drink a coffee</li>
                    <li><input type="checkbox" id="morning4"> Eat a sandwich</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td>Midday</td>
            <td><input type="checkbox" id="midday1"> Work</td>
        </tr>
        <tr>
            <td>Night</td>
            <td>
                <ul>
                    <li><input type="checkbox" id="night1"> Ironing shirt next day</li>
                    <li><input type="checkbox" id="night2"> Make a breakfast</li>
                    <li><input type="checkbox" id="night3"> Make a lunch</li>
                </ul>
            </td>
        </tr>
    </table>
    <button onclick="saveData()">Save</button>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
        import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-database.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCHQ5kHLkZ9KaAGeMkk32b1PrPOuGC9tAY",
            authDomain: "daily-schedule-checker.firebaseapp.com",
            projectId: "daily-schedule-checker",
            storageBucket: "daily-schedule-checker.appspot.com",
            messagingSenderId: "504550360097",
            appId: "1:504550360097:web:6511d9c4f1824fb2e7cf60",
            measurementId: "G-RCP6GLD9K5",
            databaseURL: "https://daily-schedule-checker-default-rtdb.firebaseio.com/"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Function to save checkbox states to Firebase
        function saveData() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                set(ref(database, 'checkboxes/' + checkbox.id), {
                    checked: checkbox.checked
                });
            });
            alert('Data saved!');
        }

        // Function to load checkbox states from Firebase
        function loadData() {
            const dbRef = ref(database);
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                get(child(dbRef, 'checkboxes/' + checkbox.id)).then(snapshot => {
                    if (snapshot.exists()) {
                        checkbox.checked = snapshot.val().checked;
                    }
                }).catch(error => {
                    console.error(error);
                });
            });
        }

        // Function to test Firebase connection
        function testConnection() {
            const testRef = ref(database, 'testConnection');
            set(testRef, { connected: true })
                .then(() => {
                    return get(testRef);
                })
                .then(snapshot => {
                    if (snapshot.exists() && snapshot.val().connected) {
                        console.log('Firebase connection successful');
                    } else {
                        console.error('Firebase connection failed');
                    }
                })
                .catch(error => {
                    console.error('Firebase connection error:', error);
                });
        }

        // Attach functions to the window object to make them globally accessible
        window.saveData = saveData;
        window.loadData = loadData;
        window.testConnection = testConnection;

        // Load data when the page loads
        window.onload = () => {
            loadData();
            testConnection();
        };
    </script>
</body>

</html>